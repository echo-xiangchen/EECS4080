-- test program verification
-- copy_array (not discharged)

copy_array (a: ARRAY[INTEGER]) : ARRAY[INTEGER]
require
	not_empty: a.count > 0
local
	i: INTEGER
do
	from
		i := a.lower;
	invariant
		loop_invariant: forall j: INTEGER; | (a.lower <= j and j < i) => (Result[j] = a[j])
	until
		i > a.upper
	loop
		Result[i] := a[i];
		i := i + 1;
	variant
		loop_variant: a.upper - i
	end
ensure
	correct_result: forall k: INTEGER; | (a.lower <= k and k <= a.upper) => (Result[k] = a[k])
end

verify copy_array