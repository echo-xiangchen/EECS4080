-- test program verification
-- calculating tax (with error)

-- status 0: single filers
-- status 1: married filing jpintly or qualifying widow(er)
-- status 2: married filing separately
-- status 3: head of household
-- other status: wrong status


compute_tax(status: INTEGER;income: INTEGER) : INTEGER
require
	positive: income >= 0
do
	if status = 0 then
		if income <= 8350 then
			Result := income * 0.10;
		elseif income <= 33950 then
			Result := 8350 * 0.10 + (income - 8350) * 0.15;
		elseif income <= 82250 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (income - 33950) * 0.25;
		elseif income <= 171550 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (82250 - 33950) * 0.25
					+ (income - 82250) * 0.28;
		elseif income <= 372950 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (82250 - 33950) * 0.25
					+ (171550 - 82250) * 0.28 + (income - 171550) * 0.33;
		else
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (82250 - 33950) * 0.25
					+ (171550 - 82250) * 0.28 + (372950 - 171550) * 0.33
					+ (income - 372950) * 0.35;
		end
	elseif status = 1 then
		if income <= 16700 then
			Result := income * 0.10;
		elseif income <= 67900 then
			Result := 16700 * 0.10 + (income - 16700) * 0.15;
		elseif income <= 137050 then
			Result := 16700 * 0.10 + (67900 - 16700) * 0.15 + (income - 67900) * 0.25;
		elseif income <= 208850 then
			Result := 16700 * 0.10 + (67900 - 16700) * 0.15 + (137050 - 67900) * 0.25
					+ (income - 137050) * 0.28;
		elseif income <= 372950 then
			Result := 16700 * 0.10 + (67900 - 16700) * 0.15 + (137050 - 67900) * 0.25
					+ (208850 - 137050) * 0.28 + (income - 208850) * 0.33;
		else
			Result := 16700 * 0.10 + (67900 - 16700) * 0.15 + (137050 - 67900) * 0.25
					+ (208850 - 137050) * 0.28 + (372950 - 208850) * 0.33
					+ (income - 372950) * 0.35;
		end
	elseif status = 2 then
		if income <= 8350 then
			Result := income * 0.10;
		elseif income <= 33950 then
			Result := 8350 * 0.10 + (income - 8350) * 0.15;
		elseif income <= 68525 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (income - 33950) * 0.25;
		elseif income <= 104425 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (68525 - 33950) * 0.25
					+ (income - 68525) * 0.28;
		elseif income <= 186475 then
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (68525 - 33950) * 0.25
					+ (104425 - 68525) * 0.28 + (income - 104425) * 0.33;
		else
			Result := 8350 * 0.10 + (33950 - 8350) * 0.15 + (68525 - 33950) * 0.25
					+ (104425 - 68525) * 0.28 + (186475 - 104425) * 0.33
					+ (income - 186475) * 0.35;
		end
	elseif status = 3 then
		if income <= 11950 then
			Result := income * 0.10;
		elseif income <= 45500 then
			Result := 11950 * 0.10 + (income - 11950) * 0.15;
		elseif income <= 117450 then
			Result := 11950 * 0.10 + (45500 - 11950) * 0.15 + (income - 45500) * 0.25;
		elseif income <= 190200 then
			Result := 11950 * 0.10 + (45500 - 11950) * 0.15 + (117450 - 45500) * 0.25
					+ (income - 117450) * 0.28;
		elseif income <= 372950 then
			Result := 11950 * 0.10 + (45500 - 11950) * 0.15 + (117450 - 45500) * 0.25
					+ (190200 - 117450) * 0.28 + (income - 190200) * 0.33;
		else
			Result := 11950 * 0.10 + (45500 - 11950) * 0.15 + (117450 - 45500) * 0.25
					+ (190200 - 117450) * 0.28 + (372950 - 190200) * 0.33
					+ (income - 372950) * 0.35;
		end
	else
		Result := -1;
	end
ensure
	case0_1_specific: (status = 0 and income = 8350) => (Result = income * 0.10)
	case0_1_general: (status = 0 and income <= 8350) => (Result = income * 0.10)
	case0_2_specific: (status = 0 and income = 33940) => (Result = 8350 * 0.10 + (income - 8350) * 0.15)
	case0_2_general: (status = 0 and (income > 8350 and income <= 33950)) => (Result = 8350 * 0.10 + (income - 8350) * 0.15)
	case0_3_specific: (status = 0 and income = 81250) => (Result = 8350 * 0.10 + (33950 - 8350) * 0.15 + (income - 33950) * 0.25)
	case0_3_general: (status = 0 and (income > 33950 and income <= 82250)) => (Result = 8350 * 0.10 + (33950 - 8350) * 0.15 + (income - 33950) * 0.25)
	case0_4_specific: (status = 0 and income = 372950) => (Result = 8350 * 0.10 + (33950 - 8350) * 0.15 + (82250 - 33950) * 0.25
					+ (171550 - 82250) * 0.28 + (income - 171550) * 0.33)
end

verify compute_tax